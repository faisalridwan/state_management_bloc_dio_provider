import 'package:flutter/material.dart';import 'package:provider/provider.dart';import 'package:state_management_app/blocs/all_post_bloc.dart';import 'package:state_management_app/model/allpost_model.dart';import 'package:state_management_app/pages/detail_page.dart';class HomePage extends StatefulWidget {  @override  _HomePageState createState() => _HomePageState();}class _HomePageState extends State<HomePage> {  @override  Widget build(BuildContext context) {    return Scaffold(      body: Column(        children: <Widget>[          Consumer<AllPostBloc>(            builder: (BuildContext context, AllPostBloc allPost, Widget child) {              List<AllPost> value = [];              if (allPost.loading) {                return CircularProgressIndicator();              } else {                if (allPost.allPost != null) {                  value = allPost.allPost;                }              }              return Expanded(                  child: ListView.builder(                shrinkWrap: true,                itemCount: value.length,                itemBuilder: (BuildContext context, int index) {                  return InkWell(                    onTap: () {                      Navigator.of(context).push(                        MaterialPageRoute(                          builder: (_) => DetailPage(                            allPost: value[index],                          ),                        ),                      );                    },                    child: Container(                      child: Card(                        shape: RoundedRectangleBorder(                          borderRadius: BorderRadius.all(Radius.circular(10)),                        ),                        child: Row(                          children: <Widget>[                            Container(                              height: 180,                              width: 330,                              child: Column(                                crossAxisAlignment: CrossAxisAlignment.start,                                children: <Widget>[                                  Container(                                    margin: EdgeInsets.only(                                        top: 20, left: 15, right: 10),                                    child: Text(                                      '${value[index].title.toUpperCase()}',                                      style: TextStyle(                                          fontWeight: FontWeight.bold),                                    ),                                  ),                                  Container(                                    margin: EdgeInsets.only(                                      left: 20,                                      top: 15,                                      bottom: 10,                                    ),                                    child: Text('${value[index].body}'),                                  )                                ],                              ),                            ),                          ],                        ),                      ),                    ),                  );                },              ));            },          ),        ],      ),    );  }  @override  void didChangeDependencies() {    super.didChangeDependencies();    Provider.of<AllPostBloc>(context, listen: false).getTodoData();  }}