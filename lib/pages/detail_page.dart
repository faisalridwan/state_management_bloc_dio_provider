import 'package:flutter/material.dart';import 'package:provider/provider.dart';import 'package:state_management_app/blocs/comment_bloc.dart';import 'package:state_management_app/blocs/detail_bloc.dart';import 'package:state_management_app/model/allpost_model.dart';import 'package:state_management_app/model/comment_model.dart';import 'package:state_management_app/model/detail_model.dart';class DetailPage extends StatefulWidget {  final AllPost allPost;  const DetailPage({Key key, this.allPost}) : super(key: key);  @override  _DetailPageState createState() => _DetailPageState();}class _DetailPageState extends State<DetailPage> {  @override  void initState() {    print('INI ID = ${widget.allPost.id}');    super.initState();    Provider.of<DetailBloc>(context, listen: false).getTodoDetail(widget.allPost.id);    Provider.of<CommentBloc>(context, listen: false).getTodoComment(widget.allPost.id);  }  @override  Widget build(BuildContext context) {    return Scaffold(      appBar: AppBar(        actions: <Widget>[          IconButton(            icon: Icon(              Icons.edit,              color: Colors.black,            ),            onPressed: () {},          )        ],        centerTitle: true,        title: Text(          'DETAIL POST',          style: TextStyle(color: Colors.black),        ),        backgroundColor: Colors.white,        leading: IconButton(          icon: Icon(            Icons.arrow_back,            color: Colors.black,          ),          onPressed: () {            Navigator.pop(context);          },        ),      ),      body: Consumer(          builder: (BuildContext context, DetailBloc detailbl, Widget child) {        Detail value ;        if (detailbl.loading) {          return CircularProgressIndicator();        } else {          if (detailbl.detail != null) {            value = detailbl.detail;          }        }        return Column(          crossAxisAlignment: CrossAxisAlignment.start,          children: <Widget>[            Container(              margin: EdgeInsets.only(left: 20, top: 20),              child: Text(                'Name : ${value.title.toUpperCase()}',                style: TextStyle(fontWeight: FontWeight.bold),              ),            ),            Container(              margin: EdgeInsets.only(left: 20, top: 20),              child: Text('Body : ${value.body}'),            ),            Container(              margin: EdgeInsets.only(left: 10, top: 10),              child: Text(                "Comment : ",                style: TextStyle(fontWeight: FontWeight.bold, fontSize: 20),              ),            ),            Container(              child: Consumer(builder: (BuildContext context, CommentBloc commentbl, Widget child) {                List<Comment> valuec = [];                if (commentbl.loading) {                  return CircularProgressIndicator();                } else {                  if (commentbl.comment != null) {                    valuec = commentbl.comment;                  }                }                return Expanded(child: Container(                  child: GridView.builder(                    gridDelegate: new SliverGridDelegateWithFixedCrossAxisCount(                        crossAxisCount: 3),                    itemCount: valuec.length,                    itemBuilder: (BuildContext context, int index) {                      return Container(                        margin: EdgeInsets.all(10),                        height: double.infinity,                        width: 700,                        child: Card(                          shape: RoundedRectangleBorder(                            borderRadius:                            BorderRadius.all(Radius.circular(10)),                          ),                          child: Column(                            crossAxisAlignment: CrossAxisAlignment.start,                            children: <Widget>[                              Container(                                  margin: EdgeInsets.all(5),                                  child: Text(                                      'Nama : ${valuec[index].name.toString()}')),                              Container(                                margin: EdgeInsets.all(5),                                child: Text(                                    'Email : ${valuec[index].email.toString()}'),                              ),                              Container(                                margin: EdgeInsets.all(5),                                child: Text(                                    'Body : ${valuec[index].body.toString()}'),                              ),                            ],                          ),                        ),                      );                    },                  ),                ));              }),            )          ],        );      }),    );  }}